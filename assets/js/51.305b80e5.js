(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{349:function(t,a,s){"use strict";s.r(a);var r=s(6),v=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"动画"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动画"}},[t._v("#")]),t._v(" 动画")]),t._v(" "),a("h2",{attrs:{id:"方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方案"}},[t._v("#")]),t._v(" 方案")]),t._v(" "),a("p",[t._v("动画基本上分类两类：补间动画和帧动画。")]),t._v(" "),a("ul",[a("li",[t._v("补间动画：补齐中间的动画。由浏览器帮助补齐中间的状态，开发者只需要定义开始和结束的状态。")]),t._v(" "),a("li",[t._v("帧动画：除了开始与结束状态，开发者还可以定义中间关键帧的状态，可以制作复杂的动画。")])]),t._v(" "),a("h2",{attrs:{id:"方案-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方案-2"}},[t._v("#")]),t._v(" 方案")]),t._v(" "),a("p",[t._v("前端中实现页面动画的方法主要有以下几种：")]),t._v(" "),a("ul",[a("li",[t._v("javascript直接实现；")]),t._v(" "),a("li",[t._v("CSS3 transition；（补间动画）")]),t._v(" "),a("li",[t._v("CSS3 animation；（帧动画）")]),t._v(" "),a("li",[t._v("Canvas动画；")]),t._v(" "),a("li",[t._v("requestAnimationFrame；")])]),t._v(" "),a("h2",{attrs:{id:"javascript-直接实现动画"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript-直接实现动画"}},[t._v("#")]),t._v(" JavaScript 直接实现动画")]),t._v(" "),a("blockquote",[a("p",[t._v("其主要思想是通过setInterval或setTimeout方法的回调函数来持续调用改变某个元素的CSS样式以达到元素样式变化的效果。")])]),t._v(" "),a("p",[t._v("Jquery的animate()方法就是这种方式实现的。")]),t._v(" "),a("h4",{attrs:{id:"存在的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#存在的问题"}},[t._v("#")]),t._v(" 存在的问题")]),t._v(" "),a("p",[t._v("javascript 实现动画通常会导致页面频繁性"),a("strong",[t._v("重排重绘")]),t._v("，消耗性能，一般应该在桌面端浏览器。在移动端上使用会有明显的卡顿。")]),t._v(" "),a("h2",{attrs:{id:"css3-transition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css3-transition"}},[t._v("#")]),t._v(" CSS3 transition")]),t._v(" "),a("p",[t._v("transition是过度动画。但是transition并不能实现独立的动画，只能在某个标签元素样式或状态改变时进行平滑的动画效果过渡，而不是马上改变。")]),t._v(" "),a("h4",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[t._v("#")]),t._v(" 注意")]),t._v(" "),a("p",[t._v("在移动端开发中，直接使用transition动画会让页面变慢甚至卡顿。所以我们通常"),a("strong",[t._v("添加transform:translate3D(0,0,0)或transform:translateZ(0)来开启移动端动画的GPU加速")]),t._v("，让动画过程更加流畅。")]),t._v(" "),a("h2",{attrs:{id:"css3-animation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css3-animation"}},[t._v("#")]),t._v(" CSS3 animation")]),t._v(" "),a("p",[t._v("animation 算是真正意义上的CSS3动画。通过对"),a("strong",[t._v("关键帧和循环次数")]),t._v("的控制，页面标签元素会根据设定好的样式改变进行平滑过渡。而且关键帧状态的控制是通过百分比来控制的。")]),t._v(" "),a("h4",{attrs:{id:"比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#比较"}},[t._v("#")]),t._v(" 比较")]),t._v(" "),a("p",[t._v("CSS3最大的优势是摆脱了js的控制，并且能利用硬件加速以及实现复杂动画效果。")]),t._v(" "),a("h2",{attrs:{id:"canvas动画"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#canvas动画"}},[t._v("#")]),t._v(" Canvas动画")]),t._v(" "),a("blockquote",[a("p",[t._v("canvas作为H5新增元素，是借助Web API来实现动画的。")])]),t._v(" "),a("p",[t._v("注释：通过getContext()获取元素的绘制对象，通过clearRect不断清空画布并在新的位置上使用fillStyle绘制新矩形内容实现页面动画效果。")]),t._v(" "),a("h4",{attrs:{id:"比较-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#比较-2"}},[t._v("#")]),t._v(" 比较")]),t._v(" "),a("blockquote",[a("p",[t._v("Canvas主要优势是可以应对页面中多个动画元素渲染较慢的情况，完全通过javascript来渲染控制动画的执行。可用于实现较复杂动画。")])]),t._v(" "),a("h2",{attrs:{id:"requestanimationframe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe"}},[t._v("#")]),t._v(" requestAnimationFrame")]),t._v(" "),a("p",[t._v("requestAnimationFrame是另一种Web API，原理与setTimeout和setInterval类似，都是通过javascript持续循环的方法调用来触发动画动作。但是requestAnimationFrame是浏览器针对动画专门优化形成的API，在性能上比另两者要好。\n前面提到，大多数显示器的刷新频率是60Hz，大概相当于每秒钟重绘60次。大多数浏览器都会对重绘操作加以限制，不超过显示器的重绘频率，因为即使超过这个频率用户体验也不会提升。\n因此，最平滑动画的最佳循环间隔是 "),a("code",[t._v("1000ms/60 ，约16ms")]),t._v("。这个循环间隔重绘的动画是最平滑的，因为这个速度最接近浏览器的最高限速。")]),t._v(" "),a("blockquote",[a("p",[t._v("通常，我们将执行动画的"),a("strong",[t._v("每一步传到requestAnimationFrame中")]),t._v("，在每次执行完后进行异步回调来连续触发动画效果。")])]),t._v(" "),a("p",[t._v("我们注意到，"),a("code",[t._v("requestAnimationFrame")]),t._v("只是"),a("strong",[t._v("将回调的方法传入到自身的参数中执行")]),t._v("，而不是通过"),a("code",[t._v("setInterval")]),t._v("调用。你要知道，无论是"),a("code",[t._v("setInterval()")]),t._v("还是"),a("code",[t._v("setTimeout()")]),t._v("都不十分精确。为它们传入的第二个参数，实际上只是指定了把动画代码添加到浏览器任务队列中以等待执行时间。如果队列前面已经加入其他任务，那动画代码就要等前面的任务完成后再执行。")])])}),[],!1,null,null,null);a.default=v.exports}}]);