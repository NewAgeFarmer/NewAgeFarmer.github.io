<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM与DOM事件 | NAF&#39;s Land</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/icon.jpg">
    <meta name="description" content="My Tech Blog">
    
    <link rel="preload" href="/assets/css/0.styles.717a9e73.css" as="style"><link rel="preload" href="/assets/js/app.c814ba9b.js" as="script"><link rel="preload" href="/assets/js/2.f69594da.js" as="script"><link rel="preload" href="/assets/js/58.e988adf4.js" as="script"><link rel="prefetch" href="/assets/js/10.debfc785.js"><link rel="prefetch" href="/assets/js/100.b4a68115.js"><link rel="prefetch" href="/assets/js/101.9e01caaa.js"><link rel="prefetch" href="/assets/js/102.f92ff673.js"><link rel="prefetch" href="/assets/js/103.e7455d6a.js"><link rel="prefetch" href="/assets/js/11.b5c481cd.js"><link rel="prefetch" href="/assets/js/12.e622db6b.js"><link rel="prefetch" href="/assets/js/13.6d10f59d.js"><link rel="prefetch" href="/assets/js/14.d1614b90.js"><link rel="prefetch" href="/assets/js/15.1ca1409b.js"><link rel="prefetch" href="/assets/js/16.71e1f515.js"><link rel="prefetch" href="/assets/js/17.ff94f0be.js"><link rel="prefetch" href="/assets/js/18.2e6d2904.js"><link rel="prefetch" href="/assets/js/19.40099b41.js"><link rel="prefetch" href="/assets/js/20.fd967753.js"><link rel="prefetch" href="/assets/js/21.b2d02fec.js"><link rel="prefetch" href="/assets/js/22.3e2088f2.js"><link rel="prefetch" href="/assets/js/23.16b4fc72.js"><link rel="prefetch" href="/assets/js/24.0c024a72.js"><link rel="prefetch" href="/assets/js/25.1253a056.js"><link rel="prefetch" href="/assets/js/26.236cdc95.js"><link rel="prefetch" href="/assets/js/27.fd8c5b03.js"><link rel="prefetch" href="/assets/js/28.ec482e4a.js"><link rel="prefetch" href="/assets/js/29.f617820a.js"><link rel="prefetch" href="/assets/js/3.bbc1a45c.js"><link rel="prefetch" href="/assets/js/30.57d2b530.js"><link rel="prefetch" href="/assets/js/31.c5971471.js"><link rel="prefetch" href="/assets/js/32.21386ee6.js"><link rel="prefetch" href="/assets/js/33.235fca3f.js"><link rel="prefetch" href="/assets/js/34.1a5bf9f8.js"><link rel="prefetch" href="/assets/js/35.34b4a337.js"><link rel="prefetch" href="/assets/js/36.1867e6ef.js"><link rel="prefetch" href="/assets/js/37.38464fa0.js"><link rel="prefetch" href="/assets/js/38.19b890cd.js"><link rel="prefetch" href="/assets/js/39.afbdb747.js"><link rel="prefetch" href="/assets/js/4.52498a6f.js"><link rel="prefetch" href="/assets/js/40.3703b0d1.js"><link rel="prefetch" href="/assets/js/41.59250775.js"><link rel="prefetch" href="/assets/js/42.4cc4395f.js"><link rel="prefetch" href="/assets/js/43.bd37c1b1.js"><link rel="prefetch" href="/assets/js/44.3c4c1202.js"><link rel="prefetch" href="/assets/js/45.56506e33.js"><link rel="prefetch" href="/assets/js/46.55b01278.js"><link rel="prefetch" href="/assets/js/47.7f8a171f.js"><link rel="prefetch" href="/assets/js/48.b0c21c50.js"><link rel="prefetch" href="/assets/js/49.94eeebe4.js"><link rel="prefetch" href="/assets/js/5.82e28701.js"><link rel="prefetch" href="/assets/js/50.c4567901.js"><link rel="prefetch" href="/assets/js/51.305b80e5.js"><link rel="prefetch" href="/assets/js/52.fd9aa21d.js"><link rel="prefetch" href="/assets/js/53.e7751521.js"><link rel="prefetch" href="/assets/js/54.2b83ab99.js"><link rel="prefetch" href="/assets/js/55.65945351.js"><link rel="prefetch" href="/assets/js/56.f26eb25b.js"><link rel="prefetch" href="/assets/js/57.084cfef0.js"><link rel="prefetch" href="/assets/js/59.e6e3fecb.js"><link rel="prefetch" href="/assets/js/6.e34a7bc8.js"><link rel="prefetch" href="/assets/js/60.d329a1d8.js"><link rel="prefetch" href="/assets/js/61.986ff044.js"><link rel="prefetch" href="/assets/js/62.aaa49056.js"><link rel="prefetch" href="/assets/js/63.1cd86255.js"><link rel="prefetch" href="/assets/js/64.3584745e.js"><link rel="prefetch" href="/assets/js/65.7f46184f.js"><link rel="prefetch" href="/assets/js/66.c484148c.js"><link rel="prefetch" href="/assets/js/67.29d4acad.js"><link rel="prefetch" href="/assets/js/68.1d9236d4.js"><link rel="prefetch" href="/assets/js/69.b2b8233b.js"><link rel="prefetch" href="/assets/js/7.5420d15e.js"><link rel="prefetch" href="/assets/js/70.c37a0134.js"><link rel="prefetch" href="/assets/js/71.c858795b.js"><link rel="prefetch" href="/assets/js/72.54d1cd1b.js"><link rel="prefetch" href="/assets/js/73.c9acee6a.js"><link rel="prefetch" href="/assets/js/74.f3395a95.js"><link rel="prefetch" href="/assets/js/75.c169ec8f.js"><link rel="prefetch" href="/assets/js/76.ddb29ff0.js"><link rel="prefetch" href="/assets/js/77.9ce1adee.js"><link rel="prefetch" href="/assets/js/78.fb085b8c.js"><link rel="prefetch" href="/assets/js/79.cf7ca3c9.js"><link rel="prefetch" href="/assets/js/8.1c5f5c07.js"><link rel="prefetch" href="/assets/js/80.02bb0cb2.js"><link rel="prefetch" href="/assets/js/81.9b51d30c.js"><link rel="prefetch" href="/assets/js/82.bc70176a.js"><link rel="prefetch" href="/assets/js/83.8d8cdff7.js"><link rel="prefetch" href="/assets/js/84.6cc9c192.js"><link rel="prefetch" href="/assets/js/85.87a7f4fa.js"><link rel="prefetch" href="/assets/js/86.5477e47f.js"><link rel="prefetch" href="/assets/js/87.b2a32025.js"><link rel="prefetch" href="/assets/js/88.0869a8f5.js"><link rel="prefetch" href="/assets/js/89.407a99d7.js"><link rel="prefetch" href="/assets/js/9.fba127b2.js"><link rel="prefetch" href="/assets/js/90.815c6e71.js"><link rel="prefetch" href="/assets/js/91.45be04b7.js"><link rel="prefetch" href="/assets/js/92.d8525baf.js"><link rel="prefetch" href="/assets/js/93.57a6b60f.js"><link rel="prefetch" href="/assets/js/94.a1fc1ba1.js"><link rel="prefetch" href="/assets/js/95.6de684a2.js"><link rel="prefetch" href="/assets/js/96.abc0c0c9.js"><link rel="prefetch" href="/assets/js/97.5e3fb029.js"><link rel="prefetch" href="/assets/js/98.91b04814.js"><link rel="prefetch" href="/assets/js/99.a9162007.js">
    <link rel="stylesheet" href="/assets/css/0.styles.717a9e73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/CC.jpg" alt="NAF's Land" class="logo"> <span class="site-name can-hide">NAF's Land</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数字营销" class="dropdown-title"><span class="title">数字营销</span> <span class="arrow down"></span></button> <button type="button" aria-label="数字营销" class="mobile-dropdown-title"><span class="title">数字营销</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Marketing/notes/01-市场营销/" class="nav-link">
  市场营销
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/02-营销漏斗/" class="nav-link">
  营销漏斗
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/03-数据与指标/" class="nav-link">
  数据与指标
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/04-数字营销与电子商务策略/" class="nav-link">
  数字营销于电子商务策略
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/05-营销漏斗II/" class="nav-link">
  营销漏斗II
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/06-用户画像/" class="nav-link">
  用户画像
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/07-搜索引擎/" class="nav-link">
  搜索引擎
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/08-SEO优化I/" class="nav-link">
  SEO优化
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/09-SEO操作II/" class="nav-link">
  SEO操作II
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="跨境电商" class="dropdown-title"><span class="title">跨境电商</span> <span class="arrow down"></span></button> <button type="button" aria-label="跨境电商" class="mobile-dropdown-title"><span class="title">跨境电商</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/EC/notes/01-跨境电商/" class="nav-link">
  跨境电商
</a></li><li class="dropdown-item"><!----> <a href="/EC/notes/02-独立站/" class="nav-link">
  独立站
</a></li><li class="dropdown-item"><!----> <a href="/EC/notes/03-亚马逊/" class="nav-link">
  亚马逊
</a></li><li class="dropdown-item"><!----> <a href="/EC/notes/04-基本运作/" class="nav-link">
  运作
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客笔记" class="dropdown-title"><span class="title">博客笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客笔记" class="mobile-dropdown-title"><span class="title">博客笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/notes/01-html/01-互联网/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/02-css/01-CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/03-js/01-JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/04-nodejs/01-Node.js/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/05-vue/01-Vue.js/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/06-综合问题/fastQA.html" class="nav-link">
  综合问题
</a></li></ul></div></div><div class="nav-item"><a href="/visn/notes/01-开发指南/01-intro.html" class="nav-link">
  visn-ui
</a></div><div class="nav-item"><a href="https://github.com/NewAgeFarmer?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数字营销" class="dropdown-title"><span class="title">数字营销</span> <span class="arrow down"></span></button> <button type="button" aria-label="数字营销" class="mobile-dropdown-title"><span class="title">数字营销</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Marketing/notes/01-市场营销/" class="nav-link">
  市场营销
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/02-营销漏斗/" class="nav-link">
  营销漏斗
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/03-数据与指标/" class="nav-link">
  数据与指标
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/04-数字营销与电子商务策略/" class="nav-link">
  数字营销于电子商务策略
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/05-营销漏斗II/" class="nav-link">
  营销漏斗II
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/06-用户画像/" class="nav-link">
  用户画像
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/07-搜索引擎/" class="nav-link">
  搜索引擎
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/08-SEO优化I/" class="nav-link">
  SEO优化
</a></li><li class="dropdown-item"><!----> <a href="/Marketing/notes/09-SEO操作II/" class="nav-link">
  SEO操作II
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="跨境电商" class="dropdown-title"><span class="title">跨境电商</span> <span class="arrow down"></span></button> <button type="button" aria-label="跨境电商" class="mobile-dropdown-title"><span class="title">跨境电商</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/EC/notes/01-跨境电商/" class="nav-link">
  跨境电商
</a></li><li class="dropdown-item"><!----> <a href="/EC/notes/02-独立站/" class="nav-link">
  独立站
</a></li><li class="dropdown-item"><!----> <a href="/EC/notes/03-亚马逊/" class="nav-link">
  亚马逊
</a></li><li class="dropdown-item"><!----> <a href="/EC/notes/04-基本运作/" class="nav-link">
  运作
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博客笔记" class="dropdown-title"><span class="title">博客笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="博客笔记" class="mobile-dropdown-title"><span class="title">博客笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/notes/01-html/01-互联网/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/02-css/01-CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/03-js/01-JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/04-nodejs/01-Node.js/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/05-vue/01-Vue.js/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/guide/notes/06-综合问题/fastQA.html" class="nav-link">
  综合问题
</a></li></ul></div></div><div class="nav-item"><a href="/visn/notes/01-开发指南/01-intro.html" class="nav-link">
  visn-ui
</a></div><div class="nav-item"><a href="https://github.com/NewAgeFarmer?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScipt</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/notes/03-js/01-JavaScript.html" class="sidebar-link">01-JavaScript</a></li><li><a href="/guide/notes/03-js/02-变量与数据类型.html" class="sidebar-link">02-变量与数据类型</a></li><li><a href="/guide/notes/03-js/03-DOM.html" aria-current="page" class="active sidebar-link">03-DOM事件</a></li><li><a href="/guide/notes/03-js/04-BOM.html" class="sidebar-link">04-BOM</a></li><li><a href="/guide/notes/03-js/05-异步.html" class="sidebar-link">05-异步</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>综合问题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dom与dom事件"><a href="#dom与dom事件" class="header-anchor">#</a> DOM与DOM事件</h1> <h2 id="什么是-dom"><a href="#什么是-dom" class="header-anchor">#</a> 什么是 DOM</h2> <p>文档对象模型 (<code>DOM</code>) 是<code>HTML</code>和<code>XML</code>文档的编程接口。
<code>DOM</code>将文档解析为一个由节点和对象（包含属性和方法的对象）组成的结构集合。</p> <p>尽管通常会使用<code>JavaScript</code>来访问<code>DOM</code>， 但它并不是<code>JavaScript</code>的一部分，它也可以被其他语言使用。</p> <h2 id="dom-解析"><a href="#dom-解析" class="header-anchor">#</a> DOM 解析</h2> <p>我们常见的<code>HTML</code>元素，在浏览器中会被解析成节点：</p> <p><img src="https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/ct_htmltree.gif" alt="image"></p> <p>在控制台的 <strong>DOM树</strong> 我们也能比较清晰地看到元素间的层级关系：</p> <p><strong>节点树中的节点彼此拥有层级关系。</strong>
父（<code>parent</code>）、子（<code>child</code>）和同胞（<code>sibling</code>）等术语用于描述这些关系。父节点拥有子节点。同级的子节点被称为同胞（兄弟或姐妹）。</p> <ul><li>在节点树中，顶端节点被称为根（<code>root</code>）</li> <li>每个节点都有父节点、除了根（它没有父节点）</li> <li>一个节点可拥有任意数量的子</li> <li>同胞是拥有相同父节点的节点</li></ul> <p><strong>通过<code>HTML DOM</code>，树中的所有节点均可通过<code>JavaScript</code>进行访问。所有<code>HTML</code>元素（节点）均可被修改，也可以创建或删除节点。</strong></p> <h2 id="dom接口"><a href="#dom接口" class="header-anchor">#</a> DOM接口</h2> <p><code>DOM</code>接口主要用于操作<code>DOM</code>节点，如常见的增删查改。</p> <p>在 web 和 XML 页面脚本中使用 DOM 时，一些常用的 API 如下：</p> <ul><li><code>document.getElementById(id)</code>：根据<code>id</code>获取元素</li> <li><code>document.getElementsByTagName(name)</code>：根据<code>tag</code>获取元素</li> <li><code>document.createElement(name)</code>：创建元素</li> <li><code>parentNode.appendChild(node)</code>：添加子元素</li> <li><code>element.innerHTML</code>：设置/获取元素内容</li> <li><code>element.styles</code>：设置/获取元素样式</li> <li><code>element.setAttribute()</code>：设置元素属性值</li> <li><code>element.getAttribute()</code>：获取元素属性值</li> <li><code>element.addEventListener()</code>：添加事件绑定</li></ul> <p>通常什么时候会用呢，最常见的便是列表的维护，包括增加新的选项、删除某个、修改某个等等。</p> <p>在浏览器兼容性问题很多的时候，我们常常会使用<code>jQuery</code>来进行些<code>DOM</code>操作，如今兼容性问题逐渐变少，大家更倾向于用原生<code>DOM</code>接口来进行操作。</p> <h2 id="dom-事件流"><a href="#dom-事件流" class="header-anchor">#</a> DOM 事件流</h2> <p>事件流所描述的就是从页面中接受事件的顺序。
<strong>DOM事件流（<code>event flow</code>）存在三个阶段：事件捕获阶段、处于目标阶段、事件冒泡阶段。</strong></p> <ol><li>捕获阶段：一开始从文档的根节点流向目标对象；</li> <li>目标阶段：然后在目标对向上被触发；</li> <li>冒泡阶段：之后再回溯到文档的根节点。</li></ol> <h3 id="事件捕获"><a href="#事件捕获" class="header-anchor">#</a> 事件捕获</h3> <p>当鼠标点击或者触发 dom 事件时，浏览器会从根节点开始由外到内进行事件传播，即点击了子元素，如果父元素通过事件捕获方式注册了对应的事件的话，会先触发父元素绑定的事件。</p> <p>在事件捕获的概念下在<code>p</code>元素上发生<code>click</code>事件的顺序应该是<code>document -&gt; html -&gt; body -&gt; div -&gt; p</code>。</p> <h3 id="事件冒泡"><a href="#事件冒泡" class="header-anchor">#</a> 事件冒泡</h3> <p>与事件捕获恰恰相反，事件冒泡顺序是由内到外进行事件传播，直到根节点。</p> <p>在事件冒泡的概念下在<code>p</code>元素上发生<code>click</code>事件的顺序应该是<code>p -&gt; div -&gt; body -&gt; html -&gt; document</code>。</p> <p><strong><code>DOM</code>标准事件流的触发的先后顺序为：先捕获再冒泡，即当触发 dom 事件时，会先进行事件捕获，捕获到事件源之后通过事件传播进行事件冒泡。</strong></p> <p>不同的浏览器对此有着不同的实现，IE10 及以下不支持捕获型事件，所以就少了一个事件捕获阶段，IE11、Chrome 、Firefox、Safari等浏览器则同时存在。</p> <p>曾经踩过 IE9 中<code>button</code>的坑，例如<code>&lt;button&gt;&lt;span&gt;&lt;/span&gt;&lt;/button&gt;</code>，如果我们分别在<code>button</code>以及<code>span</code>里均绑定<code>click</code>事件，则<code>span</code>的事件不会被触发。不知道这个跟事件机制是否相关呢？</p> <p><strong>addEventListener</strong> <code>addEventListener</code>的第三个参数就是为冒泡和捕获准备的.
<code>addEventListener</code>有三个参数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>element.addEventListener(event, function, useCapture)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>event</code>：需要绑定的事件</li> <li><code>function</code>：触发事件后要执行的函数</li> <li><code>useCapture</code>：默认值是false，表示在事件冒泡阶段调用事件处理函数。如果参数为true，则表示在事件捕获阶段调用处理函数。</li></ul> <h3 id="事件委托"><a href="#事件委托" class="header-anchor">#</a> 事件委托</h3> <p>基于事件冒泡机制，我们可以实现将子元素的事件委托给父级元素来进行处理。
当我们需要对很多元素添加事件的时候，可以通过将事件添加到它们的父节点而将事件委托给父节点来触发处理函数。</p> <p>这样能解决什么问题呢？</p> <ol><li>绑定子元素会绑定很多次的绑定，而绑定父元素只需要一次绑定。</li> <li>将事件委托给父节点，这样我们对子元素的增加和删除、移动等，都不需要重新进行事件绑定。</li></ol> <p>很常见的就是我们有个列表，每个选项都可以进行编辑、删除、添加标签等功能，而把事件委托给父元素或者<code>document</code>，不管我们新增、删除、更新选项，都不需手动去绑定和移除事件。</p> <p>最常在<code>jQuery</code>中使用事件委托：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$(&quot;#my-list&quot;).delegate(&quot;button&quot;, &quot;click&quot;, function(){
  // &quot;$(this)&quot;是被click的元素
  console.log(&quot;you clicked a button&quot;,$(this));
});
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>现在我们基本上都使用框架了，我们可以随意地在元素上绑定事件，如 Vue 中<code>&lt;div @click=&quot;myClickEvent&quot; /&gt;</code>，因为框架会帮我们用事件委托的方式处理掉，大部分都会绑定在最外层初始化的<code>id</code>元素，或者是<code>document</code>吧。</p> <h3 id="虚拟dom"><a href="#虚拟dom" class="header-anchor">#</a> 虚拟DOM</h3> <p>一个<code>DOM</code>节点元素，其实是很复杂的，包含了很多的属性和方法。</p> <p>我们来简单打印一下一个<code>DOM</code>元素：
<img src="https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/1512633321%281%29.png" alt="image"></p> <p>看到右边的滚动条了没，有如此之多的属性。</p> <p>所以随着应用程序越来越复杂，<code>DOM</code>操作越来越频繁，需要监听事件和在事件回调用更新页面的DOM操作也越来越多，性能消耗则会比较大。于是乎，虚拟<code>DOM</code>的想法便被人提出并实现了。</p> <p>虚拟<code>DOM</code>其实是用来模拟真实<code>DOM</code>的中间产物，主要包括以下功能：</p> <p><strong>1. 用<code>JS</code>对象模拟<code>DOM</code>树，简化<code>DOM</code>对象。</strong></p> <p>简单来说，就是用一个对象模拟，保留主要的一些<code>DOM</code>属性，其他的则去掉。</p> <p><strong>2. 使用虚拟<code>DOM</code>，结合操作<code>DOM</code>的接口，来生成真实<code>DOM</code>。</strong></p> <p>使用假<code>DOM</code>生成真<code>DOM</code>，同时保持真实<code>DOM</code>对象的引用，以便3步骤的执行。</p> <p><strong>3. 更新<code>DOM</code>时，比较两棵虚拟<code>DOM</code>树的差异，局部更新真实<code>DOM</code>。</strong></p> <p>这个就比较有意思，可以根据数据的变化，来最小化地移动、替换、删除原有的<code>DOM</code>元素。</p> <p>结合使用以上功能，便能在复杂应用中更好地维护了。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/22/2022, 2:18:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/notes/03-js/02-变量与数据类型.html" class="prev">
        02-变量与数据类型
      </a></span> <span class="next"><a href="/guide/notes/03-js/04-BOM.html">
        04-BOM
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="reco-bgm-panel" data-v-5bd7c5aa><audio id="bgm" src="https://cg-sycdn.kuwo.cn/c7e7ab409190fef21381cc6646a221c1/648c712f/resource/n3/74/27/3392449971.mp3" data-v-5bd7c5aa></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-5bd7c5aa data-v-41bcba48 data-v-5bd7c5aa><img src="https://p2.music.126.net/r2DyRi2Zfw2_Ry-vEFAa3g==/109951166917967844.jpg" data-v-5bd7c5aa></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-5bd7c5aa data-v-41bcba48 data-v-5bd7c5aa><div class="reco-bgm-cover" style="background-image:url(https://p2.music.126.net/r2DyRi2Zfw2_Ry-vEFAa3g==/109951166917967844.jpg);" data-v-5bd7c5aa><div class="mini-operation" style="display:none;" data-v-5bd7c5aa><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-5bd7c5aa></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-5bd7c5aa></i></div> <div class="falut-message" style="display:none;" data-v-5bd7c5aa>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-5bd7c5aa data-v-41bcba48 data-v-5bd7c5aa><div class="info-box" data-v-5bd7c5aa><i class="reco-bgm reco-bgm-music music" data-v-5bd7c5aa></i>Mia Hates Jazz</div> <div class="info-box" data-v-5bd7c5aa><i class="reco-bgm reco-bgm-artist" data-v-5bd7c5aa></i>Justin Hurwitz</div> <div class="reco-bgm-progress" data-v-5bd7c5aa><div class="progress-bar" data-v-5bd7c5aa><div class="bar" data-v-5bd7c5aa></div></div></div> <div class="reco-bgm-operation" data-v-5bd7c5aa><i class="reco-bgm reco-bgm-last last" data-v-5bd7c5aa></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-5bd7c5aa></i> <i class="reco-bgm reco-bgm-play play" data-v-5bd7c5aa></i> <i class="reco-bgm reco-bgm-next next" data-v-5bd7c5aa></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-5bd7c5aa></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-5bd7c5aa></i> <div class="volume-bar" data-v-5bd7c5aa><div class="bar" data-v-5bd7c5aa></div></div></div></div> <div class="reco-bgm-left-box" data-v-5bd7c5aa data-v-41bcba48 data-v-5bd7c5aa><i class="reco-bgm reco-bgm-left" data-v-5bd7c5aa></i></div></div></div></div></div>
    <script src="/assets/js/app.c814ba9b.js" defer></script><script src="/assets/js/2.f69594da.js" defer></script><script src="/assets/js/58.e988adf4.js" defer></script>
  </body>
</html>
